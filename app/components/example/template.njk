{%- if params.section.length %}
  {% set section = (params.section + '/') %}
{% else %}
  {% set section = 'components/' %}
{% endif -%}

{%- if params.height %}
  {% set height = params.height %}
{% else %}
  {% set height = 350 %}
{% endif -%}

{% set codeHref = './app/views/' + section + params.name + '/examples/' + params.example + '/template.html' %}
{% set cssHref = './app/views/' + section + params.name + '/examples/' + params.example + '/styles.css' %}
{% set jsHref = './app/views/' + section + params.name + '/examples/' + params.example + '/scripts.html' %}

{% set exampleHref = '/' + section + params.name + '/examples/' + params.example %}

{%- if section == 'components/' %}
  {% set argumentsHref = 'https://github.com/ministryofjustice/mojdt-frontend/tree/master/src/' + section + params.name + '#arguments' %}
{% endif -%}

{%- set nunjucksCode %}
{% code %}js
{{ getNunjucksCode(codeHref) | safe }}
{% endcode %}
{% endset -%}

{%- set htmlCode %}
{#% code %}html
{{ getHtmlCode(codeHref) | safe }}
{% endcode %#}
{% endset -%}

{%- set cssCode %}
{#% code %}css
{{ getCssCode(cssHref) | safe }}
{% endcode %#}
{% endset -%}

{%- set jsCode %}
{% code %}js
{{ getJsCode(jsHref) | safe }}
{% endcode %}
{% endset -%}

<div class="app-example">

  <span class="app-example__new-window">
    <a href="{{ exampleHref }}" target="_blank">Open this example in a new window</a>
  </span>

  <iframe class="app-example__frame" scrolling="auto" frameborder="0" height="{{ height }}" src="{{ exampleHref }}"></iframe>

</div>

<div class="app-tabs">

  <ul class="app-tabs__list">
    <li class="app-tabs__list-item"><a class="app-tabs__tab" href="#html{{'-' + params.example}}">HTML</a></li>
    <!-- <li class="app-tabs__list-item"><a class="app-tabs__tab" href="#css{{'-' + params.example}}">CSS</a></li> -->
    <!-- <li class="app-tabs__list-item"><a class="app-tabs__tab" href="#js{{'-' + params.example}}">JavaScript</a></li> -->
    <li class="app-tabs__list-item"><a class="app-tabs__tab" href="#nunjucks{{'-' + params.example}}">Nunjucks</a></li>
  </ul>

  <div class="app-tabs__panel app-js-hidden" id="html{{ '-' + params.example }}" data-module="app-copy">
    {{ htmlCode | safe }}
  </div>

  <!-- <div class="app-tabs__panel app-js-hidden" id="css{{ '-' + params.example }}" data-module="app-copy">
    {{ cssCode | safe }}
  </div> -->

  <!-- <div class="app-tabs__panel app-js-hidden" id="js{{ '-' + params.example }}" data-module="app-copy">
    {{ jsCode | safe }}
  </div> -->

  <div class="app-tabs__panel app-js-hidden" id="nunjucks{{ '-' + params.example }}" data-module="app-copy">
    {{ nunjucksCode | safe }}

    {%- if argumentsHref %}
    You can configure this component using the [Nunjucks macro arguments]({{ argumentsHref }})
    {% endif -%}

  </div>

</div>